# （归档）我在手机上调度 6 个 Claude Code 进程，工作方式发生了结构性变化

> 归档说明：这是早期版本文稿；主线最终稿请看 `docs/FINAL.md`。

上周四下午，我在去会议室的路上用 Telegram 发了一句话：

> 把画廊详情页的按钮状态统一到设计系统，补齐加载态和错误态。

等我开完一个半小时的会回到工位，这个任务已经完成了——不是"AI 说完成了"，而是我收到了一份报告：改了 3 个文件、lint 通过、build 通过、风险评级 low、无 scope drift。我看了一眼 diff，合了。

这是我用 OpenClaw + Claude Code + tmux 组合工作以来比较典型的一次体验。

## 从"开一堆窗口"到"管理 jobs"

并行做事时，传统方式的心智负担不在"忙"，在于你要维护一张映射表：

- 这个 VS Code 窗口对应哪个任务
- 那个终端 tab 跑到哪一步了
- AI 聊天窗口里的上下文还在不在

任务越多，这张表越重。注意力不是被工作吞噬的，是被**现场管理**吞噬的。

我现在的做法是把每个任务变成一个独立的后台作业（job）：

- **OpenClaw**（我的调度系统）负责接收任务、生成结构化指令、启动执行环境
- **Claude Code** 在隔离的 tmux 会话里执行——读代码、改代码、跑 lint 和 build
- **tmux** 让这些会话可随时查看、可随时接管

不再是"哪个窗口在跑什么"，而是"这个 label 的 job 状态是什么"。

## 三个改变体验的瞬间

**第一个：随时 attach**

我在排查另一个问题时，想看之前派出去的一个重构任务走到哪了。一行命令：

```bash
tmux -S /tmp/clawdbot-tmux-sockets/clawdbot.sock attach -t cc-refactor-auth
```

看到 Claude Code 正在跑 `npm run build`，还在处理两个类型错误。知道了，没卡住，继续做别的。

这种"瞄一眼就知道状态"的感觉，和"打开 6 个窗口逐个找"完全不同。

**第二个：卡住时直接接管**

有一次任务卡在权限/环境问题上——Claude Code 卡在某个配置细节里出不来。我 attach 进去，手动改了一处配置，按回车，Claude Code 接着往下跑了。

没有"停掉→重新开→重新描述上下文"的损耗。tmux session 的状态一直在。

**第三个：报告可复盘**

每个任务完成前，必须产出一份结构化报告。不是"我改好了"这种口头交付，而是：

```json
{
  "changedFiles": ["lib/auth.ts", "components/login.tsx"],
  "lint": {"ok": true},
  "build": {"ok": true},
  "risk": "low",
  "scopeDrift": false
}
```

这意味着我不需要每次都翻代码看改了什么。先看报告判断风险，低风险直接合，有疑问再细看。

## 适用与不适用

**适合的场景：**
- 并行推 3 个以上小任务（UI 调整、文档整理、低风险重构、脚本编写）
- 需要"走开一会儿回来继续"的工作节奏
- 希望每次交付有据可查

**不适合的场景：**
- 需要频繁人机对话的探索性调试（直接用 IDE 里的 AI 更顺手）
- 涉及产品判断的决策（不应自动化）
- 单个任务特别大且高风险（应该拆小）

## 结尾

这套方案没什么魔法，核心就是三件事：用调度系统替代手动开窗口，用 tmux session 替代窗口切换，用强制报告替代口头交付。

它解决的不是"AI 不够聪明"的问题，而是"并行用 AI 时人的注意力管不过来"的问题。

---

### 可直接照抄的 3 条实践建议

1. **用 tmux session 隔离每个 AI 任务，而不是开新窗口。** 给每个任务起一个命名 session（比如 `cc-fix-login`），需要时 attach，不需要时放着。这一步不依赖 OpenClaw，任何人都能做。

2. **在 prompt 末尾加一段"交付协议"。** 要求 AI 在完成后执行 `git diff --stat`、`npm run lint`、`npm run build`，并把结果写成 JSON。从"AI 说做完了"升级为"AI 交付了可验证的报告"。

3. **先看报告、后看代码。** 报告里的 `changedFiles` + `lint.ok` + `build.ok` + `risk` 四个字段就够你做第一轮判断。只有 risk 不是 low 或者 scopeDrift 为 true 时，再 attach 进 session 看细节。
